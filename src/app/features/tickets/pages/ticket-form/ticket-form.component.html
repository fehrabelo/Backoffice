<main class="form-container" aria-labelledby="ticket-form-title">
  
  <form [formGroup]="form" (ngSubmit)="save()" class="form">
    <h2 id="ticket-form-title">{{ editing ? 'Editar Chamado' : 'Novo Chamado' }}</h2>
    <mat-form-field appearance="outline">
      <mat-label>Título</mat-label>
      <input matInput formControlName="title" required aria-required="true" aria-label="Título do chamado" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Descrição</mat-label>
      <textarea
        matInput
        formControlName="description"
        rows="4"
        aria-label="Descrição do chamado"
      ></textarea>
    </mat-form-field>

    <!-- <mat-form-field appearance="outline">
      <mat-label>Atendente</mat-label>
      <mat-autocomplete #auto="matAutocomplete" formControlName="attendant" required aria-required="true" aria-label="Atendente responsavel pelo chamado">
       @for (user of users; track user) {
      <mat-option [value]="user">{{user.name}}</mat-option>
      }
  </mat-autocomplete>
    </mat-form-field> -->

    <mat-form-field appearance="outline" class="full-width">
  <mat-label>Atendente</mat-label>
  <input
    type="text"
    matInput
    formControlName="attendant"
    [matAutocomplete]="auto"
    required
    aria-required="true"
    aria-label="Atendente responsável pelo chamado"
  />

  <mat-autocomplete #auto="matAutocomplete">
    @for (user of users; track user) {
      <mat-option [value]="user.name">{{ user.name }}</mat-option>
    }
  </mat-autocomplete>
</mat-form-field>


    <mat-form-field appearance="outline">
      <mat-label>Prioridade</mat-label>
      <mat-select formControlName="priority" required aria-required="true" aria-label="Prioridade do chamado">
        <mat-option value="baixa">Baixa</mat-option>
        <mat-option value="media">Média</mat-option>
        <mat-option value="alta">Alta</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Status</mat-label>
      <mat-select formControlName="status" required aria-required="true" aria-label="Status do chamado">
        <mat-option value="aberto">Aberto</mat-option>
        <mat-option value="em progresso">Em andamento</mat-option>
        <mat-option value="fechado">Fechado</mat-option>
      </mat-select>
    </mat-form-field>

    <div class="actions">
      <button mat-raised-button color="primary" type="submit" aria-label="Salvar chamado">Salvar</button>
      <button mat-stroked-button color="warn" type="button" (click)="cancel()" aria-label="Cancelar">Cancelar</button>
    </div>
  </form>
</main>
